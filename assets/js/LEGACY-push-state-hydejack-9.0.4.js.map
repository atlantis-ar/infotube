{"version":3,"sources":["webpack:///./_js/src/cross-fader.js","webpack:///./_js/src/flip/index.js","webpack:///./_js/src/flip/title.js","webpack:///./_js/src/push-state.js"],"names":["RE_CSS_URL","calcHash","doc","sidebarBg","querySelector","pageStyle","innerText","trim","classList","style","backgroundImage","join","isExternal","protocol","host","location","window","objectURLs","WeakMap","CrossFader","fadeDuration","sidebar","document","getElementById","prevHash","themeColorEl","newDocument","result","exec","of","url","URL","origin","fetchRx","href","method","headers","Accept","mode","pipe","switchMap","r","blob","map","createObjectURL","catchError","hash","empty","fetchImage2","objectURL","div","createElement","set","themeColor","head","content","setTimeout","newPageStyle","parentNode","replaceChild","e","process","console","error","prevDiv","insertBefore","nextElementSibling","updateStyle","animate","opacity","duration","easing","finalize","has","revokeObjectURL","get","removeChild","FLIP_TYPES","setupFLIP","start$","ready$","fadeIn$","options","other$","filter","flipType","includes","merge","setupFLIPTitle","TITLE_SELECTOR","animationMain","settings","flip$","anchor","title","add","textContent","transformOrigin","page","call","appendChild","position","first","getBoundingClientRect","last","firstFontSize","parseInt","getComputedStyle","fontSize","lastFontSize","invertX","left","invertY","top","invertScale","transform","tap","complete","zip","replaceEls","main","x","subscribe","setupAnimationMain","setupLoading","setupErrorPage","importBackButton","getFlipType","el","contains","getAttribute","button","importTemplate","buttonEl","children","addEventListener","history","back","pathname","lastElementChild","navbarEl","pushStateEl","previousElementSibling","Promise","all","Element","prototype","webComponentsReady","NAVBAR_SEL","MQ_STANDALONE","CROSS_FADE_DURATION","FADE_OUT","FADE_IN","Number","animateFadeOut","fill","mapTo","animateFadeIn","drawerEl","loadingEl","backBtnEl","standaloneMQ","matchMedia","standalone","navigator","matches","standalone$","fromMediaQuery","startWith","prepend","fromEventX","eventName","mapFn","fromEvent","detail","_","share","Object","assign","after$","progress$","error$","fadeOut$","context","pointerEvents","_noDrawer","remove","exhaustMap","display","p","toPromise","transitionUntil","promise","timer","crossFader","fetchImage","takeUntil","pairwise","mergeMap","prev","curr","fade","_pushState"],"mappings":"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","file":"LEGACY-push-state-hydejack-9.0.4.js","sourcesContent":["// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { empty, of } from 'rxjs';\nimport { catchError, finalize, map, switchMap } from 'rxjs/operators';\n\nimport { animate, fetchRx } from './common';\n\nconst RE_CSS_URL = /url\\s*\\(['\"]?(([^'\"\\\\]|\\\\.)*)['\"]?\\)/u;\n\n/** @param {Document} doc */\nconst calcHash = (doc) => {\n  const sidebarBg = doc.querySelector('.sidebar-bg');\n  const pageStyle = doc.querySelector('#_pageStyle');\n  // const rule = Array.from(pageStyle?.sheet?.rules ?? []).find(r => r.selectorText === 'html');\n  // const accentColor = rule?.style.getPropertyValue('--accent-color') ?? '';\n  // const themeColor = rule?.style.getPropertyValue('--theme-color') ?? '';\n  return [pageStyle?.innerText?.trim(), sidebarBg?.classList, sidebarBg?.style.backgroundImage].join('\\n');\n};\n\n/**\n * Consider a URL external if either the protocol, hostname or port is different.\n * @param {URL} param0\n * @param {Location=} location\n */\nfunction isExternal({ protocol, host }, location = window.location) {\n  return protocol !== location.protocol || host !== location.host;\n}\n\nconst objectURLs = new WeakMap();\n\nexport class CrossFader {\n  /** @param {number} fadeDuration */\n  constructor(fadeDuration) {\n    this.sidebar = document.getElementById('_sidebar');\n    this.fadeDuration = fadeDuration;\n    this.prevHash = calcHash(document);\n    this.themeColorEl = document.querySelector('meta[name=\"theme-color\"]');\n  }\n\n  /** @param {Document} newDocument */\n  fetchImage2(newDocument) {\n    const { backgroundImage = '' } = newDocument.querySelector('.sidebar-bg')?.style ?? {};\n    const result = RE_CSS_URL.exec(backgroundImage);\n    if (!result) {\n      return of('');\n    }\n\n    const url = new URL(result[1], window.location.origin);\n\n    return fetchRx(url.href, {\n      method: 'GET',\n      headers: { Accept: 'image/*' },\n      ...(isExternal(url) ? { mode: 'cors' } : {}),\n    }).pipe(\n      switchMap((r) => r.blob()),\n      map((blob) => URL.createObjectURL(blob)),\n      catchError(() => of(url.href)),\n    );\n  }\n\n  /** @param {Document} newDocument */\n  fetchImage(newDocument) {\n    const hash = calcHash(newDocument);\n    if (hash === this.prevHash) return empty();\n\n    return this.fetchImage2(newDocument).pipe(\n      map((objectURL) => {\n        /** @type {HTMLDivElement} */\n        const div = newDocument.querySelector('.sidebar-bg') ?? document.createElement('div');\n\n        if (objectURL) {\n          div.style.backgroundImage = `url(${objectURL})`;\n          objectURLs.set(div, objectURL);\n        }\n\n        return [div, hash, newDocument];\n      }),\n    );\n  }\n\n  /** @param {Document} newDocument */\n  updateStyle(newDocument) {\n    if (this.themeColorEl) {\n      const themeColor = newDocument.head.querySelector('meta[name=\"theme-color\"]')?.content;\n      if (themeColor) {\n        window.setTimeout(() => {\n          if (this.themeColorEl) {\n            this.themeColorEl.content = themeColor;\n          }\n        }, 250);\n      }\n    }\n\n    try {\n      const pageStyle = document.getElementById('_pageStyle');\n      const newPageStyle = newDocument.getElementById('_pageStyle');\n      if (!newPageStyle) return;\n      pageStyle?.parentNode?.replaceChild(newPageStyle, pageStyle);\n    } catch (e) {\n      if (process.env.DEBUG) console.error(e);\n    }\n  }\n\n  /**\n   * @param {[HTMLDivElement]} param0\n   * @param {[HTMLDListElement, string, Document]} param1\n   */\n  fade([prevDiv], [div, hash, newDocument]) {\n    prevDiv?.parentNode?.insertBefore(div, prevDiv.nextElementSibling);\n\n    this.updateStyle(newDocument);\n\n    // Only update the prev hash after we're actually in the fade stage\n    this.prevHash = hash;\n\n    return animate(div, [{ opacity: 0 }, { opacity: 1 }], {\n      duration: this.fadeDuration,\n      easing: 'ease',\n    }).pipe(\n      finalize(() => {\n        if (objectURLs.has(prevDiv)) URL.revokeObjectURL(objectURLs.get(prevDiv));\n        prevDiv?.parentNode?.removeChild(prevDiv);\n      }),\n    );\n  }\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { merge } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { setupFLIPTitle } from './title';\n\nconst FLIP_TYPES = ['title'];\n\nexport function setupFLIP(start$, ready$, fadeIn$, options) {\n  const other$ = start$.pipe(filter(({ flipType }) => !FLIP_TYPES.includes(flipType)));\n\n  return merge(setupFLIPTitle(start$, ready$, fadeIn$, options), other$);\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { of, zip } from 'rxjs';\nimport { tap, finalize, filter, map, switchMap } from 'rxjs/operators';\n\nimport { animate, empty } from '../common';\n\nconst TITLE_SELECTOR = '.page-title, .post-title';\n\nexport function setupFLIPTitle(start$, ready$, fadeIn$, { animationMain, settings }) {\n  if (!animationMain) return start$;\n\n  const flip$ = start$.pipe(\n    filter(({ flipType }) => flipType === 'title'),\n    switchMap(({ anchor }) => {\n      if (!anchor) return of({});\n\n      const title = document.createElement('h1');\n\n      title.classList.add('page-title');\n      title.textContent = anchor.textContent;\n      title.style.transformOrigin = 'left top';\n\n      const page = animationMain.querySelector('.page');\n      if (!page) return of({});\n\n      empty.call(page);\n      page.appendChild(title);\n\n      animationMain.style.position = 'fixed';\n      animationMain.style.opacity = 1;\n\n      const first = anchor.getBoundingClientRect();\n      const last = title.getBoundingClientRect();\n      const firstFontSize = parseInt(getComputedStyle(anchor).fontSize, 10);\n      const lastFontSize = parseInt(getComputedStyle(title).fontSize, 10);\n\n      const invertX = first.left - last.left;\n      const invertY = first.top - last.top;\n      const invertScale = firstFontSize / lastFontSize;\n\n      anchor.style.opacity = 0;\n\n      const transform = [\n        {\n          transform: `translate3d(${invertX}px, ${invertY}px, 0) scale(${invertScale})`,\n        },\n        { transform: 'translate3d(0, 0, 0) scale(1)' },\n      ];\n\n      return animate(title, transform, settings).pipe(\n        tap({\n          complete() {\n            animationMain.style.position = 'absolute';\n          },\n        }),\n      );\n    }),\n  );\n\n  start$\n    .pipe(\n      switchMap(({ flipType }) =>\n        zip(\n          ready$.pipe(\n            filter(() => flipType === 'title'),\n            map(({ replaceEls: [main] }) => {\n              const title = main.querySelector(TITLE_SELECTOR);\n              if (title) title.style.opacity = 0;\n              return title;\n            }),\n          ),\n          fadeIn$,\n          (x) => x,\n        ).pipe(\n          tap((title) => {\n            if (title) title.style.opacity = 1;\n            animationMain.style.opacity = 0;\n          }),\n          finalize(() => {\n            animationMain.style.opacity = 0;\n          }),\n        ),\n      ),\n    )\n    .subscribe();\n\n  return flip$;\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { fromEvent, merge, timer, zip } from 'rxjs';\nimport {\n  tap,\n  exhaustMap,\n  map,\n  mapTo,\n  mergeMap,\n  pairwise,\n  share,\n  startWith,\n  switchMap,\n  takeUntil,\n} from 'rxjs/operators';\n\nimport { animate, empty, importTemplate, webComponentsReady, fromMediaQuery } from './common';\nimport { CrossFader } from './cross-fader';\nimport { setupFLIP } from './flip';\n\n(async () => {\n  await Promise.all([\n    ...('fetch' in window ? [] : [import(/* webpackChunkName: \"fetch\" */ './polyfills/fetch')]),\n    ...('customElements' in window\n      ? []\n      : [import(/* webpackChunkName: \"webcomponents\" */ './polyfills/webcomponents')]),\n    ...('animate' in Element.prototype ? [] : [import(/* webpackChunkName: \"webanimations\" */ 'web-animations-js')]),\n    ...('IntersectionObserver' in window\n      ? []\n      : [import(/* webpackChunkName: \"intersection-observer\" */ 'intersection-observer')]),\n  ]);\n\n  await webComponentsReady;\n\n  const NAVBAR_SEL = '#_navbar > .content > .nav-btn-bar';\n  const MQ_STANDALONE = '(display-mode: standalone)';\n\n  const CROSS_FADE_DURATION = 2000;\n\n  const FADE_OUT = [{ opacity: 1 }, { opacity: 0 }];\n  const FADE_IN = [\n    { opacity: 0, transform: 'translateY(-3rem)' },\n    { opacity: 1, transform: 'translateY(0)' },\n  ];\n\n  function setupAnimationMain(pushStateEl) {\n    pushStateEl?.parentNode?.insertBefore(importTemplate('_animation-template'), pushStateEl);\n    return pushStateEl?.previousElementSibling;\n  }\n\n  function setupLoading(navbarEl) {\n    navbarEl?.appendChild(importTemplate('_loading-template'));\n    return navbarEl?.lastElementChild;\n  }\n\n  function setupErrorPage(main, url) {\n    const { pathname } = url;\n    const error = importTemplate('_error-template');\n    const anchor = error?.querySelector('.this-link');\n    if (anchor) {\n      anchor.href = pathname;\n      anchor.textContent = pathname;\n    }\n    main?.appendChild(error);\n    return main?.lastElementChild;\n  }\n\n  function importBackButton() {\n    const button = importTemplate('_back-template');\n    const buttonEl = button?.children[0];\n    button?.querySelector('.nav-btn')?.addEventListener('click', () => window.history.back());\n    return buttonEl;\n  }\n\n  function getFlipType(el) {\n    if (el?.classList.contains('flip-title')) return 'title';\n    if (el?.classList.contains('flip-project')) return 'project';\n    return el?.getAttribute?.('data-flip');\n  }\n\n  const pushStateEl = document.querySelector('hy-push-state');\n  if (!pushStateEl) return;\n\n  const duration = Number(pushStateEl.getAttribute('duration')) || 350;\n  const settings = {\n    duration: duration,\n    easing: 'ease',\n  };\n\n  const animateFadeOut = ({ main }) => animate(main, FADE_OUT, { ...settings, fill: 'forwards' }).pipe(mapTo({ main }));\n\n  const animateFadeIn = ({ replaceEls: [main], flipType }) =>\n    animate(main, FADE_IN, settings).pipe(mapTo({ main, flipType }));\n\n  const drawerEl = document.querySelector('hy-drawer');\n  const navbarEl = document.querySelector(NAVBAR_SEL);\n\n  const animationMain = setupAnimationMain(pushStateEl);\n  const loadingEl = setupLoading(navbarEl);\n\n  const backBtnEl = importBackButton();\n  if (navbarEl && backBtnEl) {\n    const standaloneMQ = window.matchMedia(MQ_STANDALONE);\n    const standalone = !!navigator.standalone || standaloneMQ.matches;\n    const standalone$ = fromMediaQuery(standaloneMQ).pipe(\n      map((e) => e.matches),\n      startWith(standalone),\n    );\n    standalone$\n      .pipe(\n        tap((matches) => {\n          if (matches) navbarEl.prepend(backBtnEl);\n          else if (backBtnEl.parentNode === navbarEl) navbarEl.removeChild(backBtnEl);\n        }),\n      )\n      .subscribe();\n  }\n\n  const fromEventX = (eventName, mapFn) =>\n    fromEvent(pushStateEl, eventName).pipe(\n      map(({ detail }) => detail),\n      mapFn ? map(mapFn) : (_) => _,\n      share(),\n    );\n\n  const start$ = fromEventX('hy-push-state-start', (detail) =>\n    Object.assign(detail, { flipType: getFlipType(detail.anchor) }),\n  );\n  const ready$ = fromEventX('hy-push-state-ready');\n  const after$ = fromEventX('hy-push-state-after');\n  const progress$ = fromEventX('hy-push-state-progress');\n  const error$ = fromEventX('hy-push-state-networkerror');\n\n  const fadeOut$ = start$.pipe(\n    map((context) => Object.assign(context, { main: document.getElementById('_main') })),\n    tap(({ main }) => {\n      main.style.pointerEvents = 'none';\n    }),\n    window._noDrawer && drawerEl?.classList.contains('cover')\n      ? tap(() => {\n          drawerEl.classList.remove('cover');\n          drawerEl.parentNode?.appendChild(drawerEl);\n        })\n      : (_) => _,\n    exhaustMap(animateFadeOut),\n    tap(({ main }) => empty.call(main)),\n    share(),\n  );\n\n  if (loadingEl) {\n    progress$.subscribe(() => {\n      loadingEl.style.display = 'flex';\n    });\n    ready$.subscribe(() => {\n      loadingEl.style.display = 'none';\n    });\n  }\n\n  const fadeIn$ = after$.pipe(\n    switchMap((context) => {\n      const p = animateFadeIn(context).toPromise();\n      context.transitionUntil(p);\n      return p;\n    }),\n    share(),\n  );\n\n  const flip$ = setupFLIP(start$, ready$, merge(fadeIn$, error$), {\n    animationMain,\n    settings: settings,\n  }).pipe(share());\n\n  start$\n    .pipe(\n      switchMap((context) => {\n        const promise = zip(timer(duration), fadeOut$, flip$).toPromise();\n        context.transitionUntil(promise);\n        return promise;\n      }),\n    )\n    .subscribe();\n\n  // FIXME: Keeping permanent subscription? turn into hot observable?\n  fadeOut$.subscribe();\n  flip$.subscribe();\n\n  const sidebarBg = document.querySelector('.sidebar-bg');\n  if (sidebarBg) {\n    const crossFader = new CrossFader(CROSS_FADE_DURATION);\n    after$\n      .pipe(\n        switchMap(({ document }) =>\n          zip(crossFader.fetchImage(document), fadeIn$).pipe(\n            map(([x]) => x),\n            takeUntil(start$),\n          ),\n        ),\n        startWith([sidebarBg]),\n        pairwise(),\n        mergeMap(([prev, curr]) => crossFader.fade(prev, curr)),\n      )\n      .subscribe();\n  }\n\n  error$\n    .pipe(\n      switchMap(({ url }) => {\n        if (loadingEl) loadingEl.style.display = 'none';\n\n        const main = document.getElementById('_main');\n        if (main) main.style.pointerEvents = '';\n        empty.call(animationMain?.querySelector('.page'));\n        empty.call(main);\n\n        setupErrorPage(main, url);\n\n        return animate(main, FADE_IN, { ...settings, fill: 'forwards' });\n      }),\n    )\n    .subscribe();\n\n  import(/* webpackMode: \"eager\" */ '@hydecorp/push-state');\n\n  window._pushState = pushStateEl;\n})();\n"],"sourceRoot":""}